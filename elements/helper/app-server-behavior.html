
<script src="../extra/firebase.js"></script>

<script>

appServer = {
    properties: {
      server: {
        type: Object,
        value: function(){return new Firebase("https://polymer-prototype.firebaseio.com");}
        // value: document.createElement('firebase-auth')
      },
      serverData: {
        type: Object,
        value: function(){return new Firebase("https://polymer-prototype.firebaseio.com");}
        // value: document.createElement('firebase-collection')
      },

      serverConnectivity: {
        type: Object,
        value: function(){return new Firebase("https://polymer-prototype.firebaseio.com/.info/connected");}
        // value: document.createElement('firebase-collection')
      }
    },
    register: function(user, callback){


      this.server.createUser(user,
        function(error, userData) {
            if (error) {
              console.info(error);
              callback(null, error);
            } else {
                console.info(userData);
                callback(userData);
            }
          });
    },
    registerFacebook:function(){

    },
    registerTwitter:function(){

    },
    login:function(user, callback){

      var self = this;

      this.server.authWithPassword( user,
        function(error, authData) {
          if (error) {
            console.log("Login Failed!", error);
            self.fire('login:error',{message:self.location.loginPassword});
            callback({message:error},error);
          } else {
            console.log("Authenticated successfully with payload:", authData);
            self.fire('app:message',{message: self.config.location.registerUserCorrect});
            callback(authData, error);
          }
        });
    },
    logout:function(){

    },
    resetPwd:function(user){

    },
    readNews:function(){

    },
    readCategories:function(){

    },
    saveURL:function(){

    },
    connectionTest:function(){
      this.serverConnectivity.on("value", function(snap) {
            if (snap.val() === true) {
              document.fire('app',{connection: true});
            } else {
              document.fire('app',{connection: false});
            }
      });
    }

  };

</script>
