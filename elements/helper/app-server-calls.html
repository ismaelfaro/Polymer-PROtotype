<link rel="import" href="../app-config-behavior.html">

<script src="https://cdn.firebase.com/js/client/2.2.9/firebase.js"></script>

<script>
  Polymer({
    is: "app-server-calls",
    behaviors: [appConfig],
    properties: {
      server: {
        type: Object,
        value: function(){return new Firebase("https://polymer-prototype.firebaseio.com");}
        // value: document.createElement('firebase-auth')
      },
      collection: {
        type: Object,
        value: function(){return new Firebase("https://polymer-prototype.firebaseio.com");}
        // value: document.createElement('firebase-collection')
      }
    },
    register(user, callback){
      var self = this;

      this.fire('app:alert',{message:this.config.location.registerPasswordError});
      console.info(callback);

      this.server.createUser(user,
        function(error, authData, callback) {
          if (error) {
            // console.log("Login Failed!", error);
            // self.fire('login:error',{message:self.location.loginPassword});
            console.info(self.callback);
            // callback({message:error}, error);
          } else {
            // console.log("Authenticated successfully with payload:", authData);
            // self.fire('app:message',{message: self.config.location.registerUserCorrect});
            // callback({message:authData}, error);
          }
        }


        // function(error, userData) {
        //     if (error) {
        //       console.log("Error creating user:", error);
        //       self.fire('app:alert',{message:error});
        //
        //
        //     } else {
        //
        //       console.info( self.config.location.registerUserCorrect);
        //       self.fire('app:message',{message: self.config.location.registerUserCorrect});
        //
        //       console.log("Successfully created user account with uid:", userData.uid);
        //     }
        // }
        //
      ).bind(self);
    },
    ready: function(){
      // console.info('------');
      // console.info(this.config.location);
      this.fire('app:alert',{message:'demo'});

    }

  });

</script>
