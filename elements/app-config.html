<script>

    (function() {

      var _appData =
        {
          developer: true,
          appName: 'filter.ly',
          logo: 'images/logo.png',
          defaultLang: 'en',
					urlBase: '',

        };

			var _dataStorage = {};

			var _appLocation = _APPLocation;

      var _userProfile = { auth: false };

      Polymer({
        is: 'app-config',
        properties: {
          app: {
            type: Object,
            notify: true,
            value: function() { return _appData; }
					},
					locale: {
            type: Object,
            notify: true,
            value: function() {
                _appLocation.setLanguage(_appLocation.getDeviceLanguage());
                return _appLocation; },
          },
          location: {
            type: Object,
            notify: true,
            value: function() {
                return _appLocation.location; },
          },
					data: {
						type: Object,
						notify: true,
						value: function() { return _dataStorage; },
					},
          userProfile: {
            type: Object,
            notify: true,
            value: function() { return _userProfile; },
          }
        },
        _dale: function(data){
          console.info(data);
        },
        consoldev: function(text){
          if(this.app.developer){
            console.info(text);
          }
        },
        _bake_cookie:function (data) {
          return 'APP='+JSON.stringify(data);
          // return JSON.stringify(data);

        },
        _recover_cookie: function(data){
          // var result = document.cookie.match(new RegExp('APP=([^;]+)'));
          // result && (result = JSON.parse(result[1]));
          return JSON.parse(data.split('APP=')[1]);
          // return JSON.parse(data);
        },
        loadCookie: function(){

          if (document.cookie === '' || document.cookie === 'APP=') return { auth: false }
          else {
            this.userProfile = this._recover_cookie(document.cookie);
            return this.userProfile;
          }

        },
        saveCookie: function(){
          document.cookie = this._bake_cookie(this.userProfile);
        },
        removeCookie: function(){
          document.cookie = 'APP=';
        },
        ready: function(){
          this.userProfile = this.loadCookie();
        }
      });
    })();

</script>
